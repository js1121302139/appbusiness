<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>评价管理</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/pullToRefresh.css" />
		<link href="../../css/page/work/evaluatemange.css" rel="stylesheet" />
	</head>

	<body>
		<div id="evaluatemange">
			<header class="mui-bar topBar mui-bar-nav">
				<a class="mui-action-back topBack-ico mui-pull-left"></a>
				<h1 class="mui-title">评价管理</h1>
			</header>
			<div class="mui-content">
				<div class="evaluateBox">
					<div class="evaluate-top">
					<div class="evaluateCount" id="evaluateContent" v-text="'评论条数:' + pageData.totalNum">
评论条数:2345
					</div>
					<div class="starLv">
						<div class="evaluateStar">
						<div class="evaluateStars" tip="3.4">
							<p class="evaluateStarsitem" v-for="(items,key) in pageData.averageGrade |0"></p>
						</div>
						<p class="evaluateStarsLine"></p>
						<p class="evaluateStarsLine"></p>
						<p class="evaluateStarsLine"></p>
						<p class="evaluateStarsLine"></p>
						<p class="evaluateStarsLine"></p>
					</div>
					<div class="evaluateNum" id="evaluateNum" v-text="pageData.averageGrade">
						4.8
					</div>
					</div>
				</div>
				
				</div>
				<div class="wrappers">
					<div id="wrapper" class="wrapperList">
						<ul id="evaluateList">
							<!--<li class="wrapperListItem">
								<div class="ListItemTop">
									<div class="userImg">
										<img src="picservice + item" alt="">
									</div>
									<div class="userInfo">
										<p class="userName">123</p>
										<div class="evaluateStar">
											<div class="evaluateStars" tip="4.3">
												<p class="evaluateStarsitem"></p>
												<p class="evaluateStarsitem"></p>
												<p class="evaluateStarsitem"></p>
											</div>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
										</div>
									</div>
									<div class="evaluateDate">
										2017-06-09
									</div>
								</div>
								<div class="evaluateMsg">
									大叔大婶大所所大撒多
								</div>
							</li>-->
							<li class="wrapperListItem" v-for="(item,key) in list">
								<div class="ListItemTop">
									<div class="userImg">
										<img src="../../images/user-img.png" :src="picservice + item.headImg" alt="">
									</div>
									<div class="userInfo">
										<p class="userName" v-text="item.userName">123</p>
										<div class="evaluateStar">
											<div class="evaluateStars" tip="4.3">
												<p class="evaluateStarsitem" v-for="(items1,key) in item.grade"></p>
											</div>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
											<p class="evaluateStarsLine"></p>
										</div>
									</div>
									<div class="evaluateDate" v-text="item.createTime">
2017-06-03 13:20:35
									</div>
								</div>
								<div class="evaluateMsg" v-text="item.content">
上世纪70年代上世纪70年代上世纪70年代上世纪70年代上世纪70年代上世纪70年代
								</div>
							</li>
						</ul>
					</div>

				</div>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/muihelper.js"></script>
		<!--<script type="text/javascript" src="../../js/page/work/evaluatemange.js"></script>-->
		<script type="text/javascript" src="../../js/iscroll.js"></script>
		<script type="text/javascript" src="../../js/pullToRefresh.js"></script>
		<script type="text/javascript" src="../../js/vue.min.js"></script>
		<script type="text/javascript">
			var Vue = new Vue({
				el: "#evaluatemange",
				data: function() {
					return {
						picservice: picservice,
						page: 1,
						pageLen: pageLen,
						totalPage: null,
						pageData: {},
						list: []
					}
				},
				created: function() {
					var _this = this;
					mui.plusReady(function() {
						_this.getEvaluatemange(function(resData) {
							_this.totalPage = Math.ceil(resData.total / _this.pageLen);
							_this.pageData = resData.data;
							_this.list = resData.data.merchantComments;
						}, 1);
						refresher.init({
							id: "wrapper",
							pullUpAction: _this.Load
						});
					})
				},
				methods: {
					getEvaluatemange: function(callBack, page) {
						var sendData = {
							config: {
								token: Fun_App.getdata("token")
							},
							fun_Success: function(data) {
								callBack(data);
							}
						}
						Fun_App.ExAjax("merchantPerson/comment", sendData);
					},
					Load: function() {
						this.page++;
						var _this = this;
						if(this.page <= this.totalPage) {
							this.getEvaluatemange(function(resData) {
								_this.list = _this.list.concat(resData.data.merchantComments);
							}, this.page)
						} else {
							refresher.info.pullUpLable='没有更多数据了!';
						}

						wrapper.refresh();
					}
				},
				filters: {
					ceil: function(val) {
						return Math.ceil(val)
					}
				}
			})
		</script>
	</body>

</html>